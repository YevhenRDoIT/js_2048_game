parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"Ir8I":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,i(n.key),n)}}function n(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function i(e){var r=o(e,"string");return"symbol"==t(r)?r:r+""}function o(e,r){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,r||"default");if("object"!=t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}var s=function(){return n(function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e(this,t),this.state=r||this.generateEmptyBoard(),this.score=0,this.status="idle"},[{key:"generateEmptyBoard",value:function(){return Array(4).fill().map(function(){return Array(4).fill(0)})}},{key:"addRandomTile",value:function(){var t=[];if(this.state.forEach(function(e,r){e.forEach(function(e,n){0===e&&t.push({row:r,col:n})})}),t.length>0){var e=Math.floor(Math.random()*t.length),r=Math.random()<.9?2:4,n=t[e],i=n.row,o=n.col;this.state[i][o]=r}}},{key:"moveLeft",value:function(){var t=this,e=!1;this.state=this.state.map(function(r){for(var n=r.filter(function(t){return 0!==t}),i=0;i<n.length-1;i++)n[i]===n[i+1]&&(n[i]*=2,n[i+1]=0,t.score+=n[i]);for(n=n.filter(function(t){return 0!==t});n.length<4;)n.push(0);return n.toString()!==r.toString()&&(e=!0),n}),e&&this.addRandomTile()}},{key:"moveRight",value:function(){this.state=this.state.map(function(t){return t.reverse()}),this.moveLeft(),this.state=this.state.map(function(t){return t.reverse()})}},{key:"moveUp",value:function(){this.state=this.transposeBoard(this.state),this.moveLeft(),this.state=this.transposeBoard(this.state)}},{key:"moveDown",value:function(){this.state=this.transposeBoard(this.state),this.moveRight(),this.state=this.transposeBoard(this.state)}},{key:"transposeBoard",value:function(t){return t[0].map(function(e,r){return t.map(function(t){return t[r]})})}},{key:"getScore",value:function(){return this.score}},{key:"getState",value:function(){return this.state}},{key:"getStatus",value:function(){return"win"===this.status||"lose"===this.status?this.status:this.isGameOver()?"lose":"playing"}},{key:"isGameOver",value:function(){var t=this;return!this.state.some(function(e,r){return e.some(function(e,n){return 0===e||(n<3&&e===t.state[r][n+1]||r<3&&e===t.state[r+1][n])})})}},{key:"start",value:function(){this.state=this.generateEmptyBoard(),this.addRandomTile(),this.addRandomTile(),this.status="playing",this.score=0}},{key:"restart",value:function(){this.start()}}])}();module.exports=s;
},{}],"6KIz":[function(require,module,exports) {
"use strict";var e=require("../modules/Game.class"),t=new e,n=document.querySelector(".game-field"),r=document.querySelector(".game-score"),o=document.querySelector(".start"),c=document.querySelector(".message-start"),a=document.querySelector(".message-win"),s=document.querySelector(".message-lose");function d(){var e=t.getState();n.innerHTML="",e.forEach(function(e){var t=document.createElement("tr");e.forEach(function(e){var n=document.createElement("td");n.classList.add("field-cell"),e>0&&(n.classList.add("field-cell--".concat(e)),n.textContent=e),t.appendChild(n)}),n.appendChild(t)}),r.textContent=t.getScore(),l()}function l(){c.classList.toggle("hidden","idle"!==t.getStatus()),a.classList.toggle("hidden","win"!==t.getStatus()),s.classList.toggle("hidden","lose"!==t.getStatus())}function i(e){switch(e.key){case"ArrowLeft":t.moveLeft();break;case"ArrowRight":t.moveRight();break;case"ArrowUp":t.moveUp();break;case"ArrowDown":t.moveDown();break;default:return}d()}o.addEventListener("click",function(){t.start(),d(),o.textContent="Restart"}),document.addEventListener("keydown",i);
},{"../modules/Game.class":"Ir8I"}]},{},["6KIz"], null)
//# sourceMappingURL=main.5723ceed.js.map